$(document).ready(function(){function a(g,f,b){var e=new google.visualization.DataTable();e.addColumn("string","Topping");e.addColumn("number","Slices");e.addRows(f);var c={title:g,backgroundColor:{fill:"transparent"},titleTextStyle:{color:"black",fontSize:14},legend:{textStyle:{color:"black"}},width:400,height:300};var d=new google.visualization.PieChart(document.getElementById(b));d.draw(e,c)}$("div.google_chart").each(function(){var b=$(this);a(b.attr("data-title"),$.parseJSON(b.attr("data-json")),b.attr("id"))});$("form#ajax-attend").submit(function(c){c.preventDefault();var b=$(this);$.post(b.attr("action"),b.serialize(),function(d){console.log(d);if(d.error){alert(d.error)}else{$("div#activity").html(d.message);$("div#statistics").html(d.chart);$("div.google_chart").each(function(){var e=$(this);a(e.attr("data-title"),$.parseJSON(e.attr("data-json")),e.attr("id"))});if(d.comments){$("div#comments").html(d.comments)}}},"json")});$("div.unconfirmed").click(function(){var b=$(this);$.get("/single/ajax/checkin?id="+this.id.split("_").pop(),function(e){var d=b.parent().attr("id").replace("unconfirmed","confirmed");var c=$("#"+d);b.detach().appendTo(c);b.removeAttr("id").removeClass("unconfirmed").addClass("confirmed").off("click").prepend("<span>"+(c.children().length-1)+"</span>")})})});