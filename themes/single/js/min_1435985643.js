$(document).ready(function(){var b=$(window).width()<400?320:400;function a(i,h,d){var g=new google.visualization.DataTable();g.addColumn("string","Topping");g.addColumn("number","Slices");g.addRows(h);var e={title:i,backgroundColor:{fill:"transparent"},titleTextStyle:{color:"black",fontSize:14},legend:{textStyle:{color:"black"}},width:b,height:300};var f=new google.visualization.PieChart(document.getElementById(d));f.draw(g,e)}function c(){$("div.google_chart").each(function(){var d=$(this);a(d.attr("data-title"),$.parseJSON(d.attr("data-json")),d.attr("id"))})}c();$("form#ajax-attend").submit(function(f){f.preventDefault();var d=$(this);$.post(d.attr("action"),d.serialize(),function(e){console.log(e);if(e.error){alert(e.error)}else{$("div#activity").html(e.message);$("div#statistics").html(e.chart);c();if(e.comments){$("div#comments").html(e.comments)}}},"json")});$("div.unconfirmed").click(function(){var d=$(this);$.get("/single/ajax/checkin?id="+this.id.split("_").pop(),function(g){var f=d.parent().attr("id").replace("unconfirmed","confirmed");var e=$("#"+f);d.detach().appendTo(e);d.removeAttr("id").removeClass("unconfirmed").addClass("confirmed").off("click").prepend("<span>"+(e.children().length-1)+"</span>")})})});